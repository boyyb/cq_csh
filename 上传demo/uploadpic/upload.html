<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>jQuery+php实现ajax文件上传</title>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="jquery.form.js"></script>
    <script>
        $(function () {
            var files = $(".files");
            $("#fileupload").wrap("<form id='myupload' action='action.php' method='post' enctype='multipart/form-data'></form>");
            $("#fileupload").change(function(){
                $("#myupload").ajaxSubmit({
                    dataType:  'json',
                    success: function(data) {
                        $("#pic").attr("src","files/"+data);
                    },
                    error:function(xhr){
                        alert("上传失败");
                    }
                });
            });
        });

    </script>
</head>
<body>
<div style="width:60px;height:60px;">
    <img width="100%" height="100%" src="" id="pic">
</div>
<table>
    <tr>
        <td>更换头像：</td>
        <td><input id="fileupload" type="file" name="mypic"></td>
    </tr>
</table>

</body>
</html>
